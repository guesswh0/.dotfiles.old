#!/bin/bash

# safe brew uninstall 
unbrew () {
    local formula
    for formula in "$@"; do
        brew deps "$formula" |
        xargs brew uninstall --ignore-dependencies --force
        brew uninstall --force "$formula"
    done
    brew missing | cut -f2 -d: | sort -u | xargs brew install
}

# cheats.sh
# https://github.com/chubin/cheat.sh
cs () {
  local search_query=""
  if [ $1 = "-q" ]; then
    shift 1
    search_query="\?Q"
  fi
  local prefix=""
  local prefixes=(
    bash c cpp java js julia latex python python3 r 
    cmake django flask git
  )
  if (( $prefixes[(Ie)$1] )); then
    prefix=$1 
    shift 1
  fi
  if [[ "${@: -1}" = <-> ]]; then
    search_query=/${@: -1}$search_query
    shift -p
  fi
  old=$IFS
  IFS="+"
  search_query=$*$search_query
  search_query=$prefix/$search_query
  IFS=$old
  curl https://cht.sh/$search_query
}